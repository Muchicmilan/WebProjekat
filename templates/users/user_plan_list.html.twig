{% extends 'base.html.twig' %}
{% block title  %} Korisnici {% endblock title %}
{% block body %}
{% if is_granted('ROLE_ADMIN') or is_granted('ROLE_TRAINER') %}
    <div class="search-container" style="margin-bottom: 1.5rem; max-width: 500px;">
        <form action="{{ path('app_users_trainer_view') }}" method="get" class="auth-form">
            <div style="display: flex; gap: 10px; align-items: center;">
                <div class="form-group" style="flex-grow: 1; margin-bottom: 0;">
                    <input 
                        type="text" 
                        name="q" 
                        placeholder="Pretraži po imenu, prezimenu, email-u..." 
                        value="{{ app.request.query.get('q') }}"
                    >
                </div>
                <button type="submit" class="btn btn-primary">Pretraži</button>
            </div>
        </form>
    </div>
    <div class="table-container">
        <table>
            <tr>
                <th>Ime</th>
                <th>Prezime</th>
                <th>E-mail</th>
                <th>Actions</th>
            </tr>
            {% for user in all_users %}
                <tr>
                    <td>{{user.name}}</td>
                    <td>{{user.surname}}</td>
                    <td>{{user.email}}</td>
                    <td>
                        <div class="table-actions">
                            <a style="text-decoration:none" href="{{ path('app_user_profile', {'id': user.id}) }}" class="btn btn-edit">Profil</a>
                        </div>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="4">Nema korisnika za prikaz</td>
                </tr>
            {% endfor %}
        </table>
    </div>
{% else %}
<section class="auth-section">
    <div class="auth-card">
        <h3 class="auth-title">Ups izgleda da ste na pogresnoj stranici!</h3>
        Kliknite ovde -><a href="{{path('app_homepage')}}" class="redirect-text">Pocetna stranica</a>
    </div>
</section>
{% endif %}
{% endblock %}